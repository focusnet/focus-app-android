<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_91) on Thu Jun 30 09:01:28 ICT 2016 -->
<title>DatabaseAdapter</title>
<meta name="date" content="2016-06-30">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="DatabaseAdapter";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../eu/focusnet/app/controller/CronService.CronBinder.html" title="class in eu.focusnet.app.controller"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../eu/focusnet/app/controller/DatabaseAdapter.DatabaseHelper.html" title="class in eu.focusnet.app.controller"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?eu/focusnet/app/controller/DatabaseAdapter.html" target="_top">Frames</a></li>
<li><a href="DatabaseAdapter.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">eu.focusnet.app.controller</div>
<h2 title="Class DatabaseAdapter" class="title">Class DatabaseAdapter</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>eu.focusnet.app.controller.DatabaseAdapter</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">DatabaseAdapter</span>
extends java.lang.Object</pre>
<div class="block">The DatabaseAdapater is a facility that helps interacting with the SQLlite database.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/focusnet/app/controller/DatabaseAdapter.DatabaseHelper.html" title="class in eu.focusnet.app.controller">DatabaseAdapter.DatabaseHelper</a></span></code>
<div class="block">Helper class for database management.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../eu/focusnet/app/controller/DatabaseAdapter.DatabaseHelper.html" title="class in eu.focusnet.app.controller">DatabaseAdapter.DatabaseHelper</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/focusnet/app/controller/DatabaseAdapter.html#databaseHelper">databaseHelper</a></span></code>
<div class="block">Our helper for database managemment</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private SQLiteDatabase</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/focusnet/app/controller/DatabaseAdapter.html#db">db</a></span></code>
<div class="block">Direct access to the SQLite database object</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/focusnet/app/controller/DatabaseAdapter.html#numberOfConsumers">numberOfConsumers</a></span></code>
<div class="block">Use to avoid concurrency issues</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/focusnet/app/controller/DatabaseAdapter.html#uniqueInstanceIdentifier">uniqueInstanceIdentifier</a></span></code>
<div class="block">A unique identifier for that instance, based on time.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../eu/focusnet/app/controller/DatabaseAdapter.html#DatabaseAdapter--">DatabaseAdapter</a></span>()</code>
<div class="block">Constructor.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/focusnet/app/controller/DatabaseAdapter.html#close--">close</a></span>()</code>
<div class="block">Close the database</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/focusnet/app/controller/DatabaseAdapter.html#getDatabaseSize--">getDatabaseSize</a></span>()</code>
<div class="block">Get the databse size (whole database, not only entries with the current data set id)</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code><a href="../../../../eu/focusnet/app/controller/SampleDao.html" title="class in eu.focusnet.app.controller">SampleDao</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/focusnet/app/controller/DatabaseAdapter.html#getSampleDao--">getSampleDao</a></span>()</code>
<div class="block">Helper function to obtain a Sample Data Access Object</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/focusnet/app/controller/DatabaseAdapter.html#makeDataPersistent--">makeDataPersistent</a></span>()</code>
<div class="block">Make data persistent.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>private SQLiteDatabase</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/focusnet/app/controller/DatabaseAdapter.html#openWritableDatabase--">openWritableDatabase</a></span>()</code>
<div class="block">Open a database for writing.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/focusnet/app/controller/DatabaseAdapter.html#useExistingDataSet--">useExistingDataSet</a></span>()</code>
<div class="block">Use the most recent data set identifier in the database, or continue to use the one of the
 current object if none was found.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="databaseHelper">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>databaseHelper</h4>
<pre>private&nbsp;<a href="../../../../eu/focusnet/app/controller/DatabaseAdapter.DatabaseHelper.html" title="class in eu.focusnet.app.controller">DatabaseAdapter.DatabaseHelper</a> databaseHelper</pre>
<div class="block">Our helper for database managemment</div>
</li>
</ul>
<a name="db">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>db</h4>
<pre>private&nbsp;SQLiteDatabase db</pre>
<div class="block">Direct access to the SQLite database object</div>
</li>
</ul>
<a name="uniqueInstanceIdentifier">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>uniqueInstanceIdentifier</h4>
<pre>private&nbsp;long uniqueInstanceIdentifier</pre>
<div class="block">A unique identifier for that instance, based on time.
 <p/>
 This identifier will be used to identify the different sets of data coming from backends
 At each data sync, we create a new DataManager that will replace the old one on success,
 and each of these DataManagers contains a single DatabaseAdapter. Therefore, by
 identifying data sync sets with this unique ID, we are able to distinguish the differents
 syncs. It makes local db cleaning easier, as it then only consists in deleting entries that
 do not match this unique ID.
 <p/>
 When updating/creating/deletion entries (PUT,POST,DELETE), we still use the same ID. This
 is not an incremental version number, but only an instance identifier.
 <p/>
 <p/>
 The databaseAdapter is initially created with a low uniqueInstanceIdentifier and data will
 created with identifier. This means that they will NOT be considered as the latest data set.
 For the data loaded under this id to become the latest data set, call makeDataPersistent()</div>
</li>
</ul>
<a name="numberOfConsumers">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>numberOfConsumers</h4>
<pre>private&nbsp;int numberOfConsumers</pre>
<div class="block">Use to avoid concurrency issues</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="DatabaseAdapter--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>DatabaseAdapter</h4>
<pre>public&nbsp;DatabaseAdapter()</pre>
<div class="block">Constructor. Set reasonable defaults.</div>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="openWritableDatabase--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>openWritableDatabase</h4>
<pre>private&nbsp;SQLiteDatabase&nbsp;openWritableDatabase()</pre>
<div class="block">Open a database for writing.
 <p/>
 The <a href="../../../../eu/focusnet/app/controller/DatabaseAdapter.html#numberOfConsumers"><code>numberOfConsumers</code></a> is used to keep track of the number of opening and closing
 of the database, such that we don't close a database that is still in use.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A DatabaseAdapter to interact with the database.</dd>
</dl>
</li>
</ul>
<a name="close--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;close()</pre>
<div class="block">Close the database</div>
</li>
</ul>
<a name="getSampleDao--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSampleDao</h4>
<pre>public&nbsp;<a href="../../../../eu/focusnet/app/controller/SampleDao.html" title="class in eu.focusnet.app.controller">SampleDao</a>&nbsp;getSampleDao()</pre>
<div class="block">Helper function to obtain a Sample Data Access Object</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A Sample Data Access Object</dd>
</dl>
</li>
</ul>
<a name="getDatabaseSize--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDatabaseSize</h4>
<pre>public&nbsp;long&nbsp;getDatabaseSize()</pre>
<div class="block">Get the databse size (whole database, not only entries with the current data set id)</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The database size in Bytes</dd>
</dl>
</li>
</ul>
<a name="useExistingDataSet--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>useExistingDataSet</h4>
<pre>public&nbsp;void&nbsp;useExistingDataSet()</pre>
<div class="block">Use the most recent data set identifier in the database, or continue to use the one of the
 current object if none was found.
 <p/>
 As mention in the introduction of this class, when starting the application, this object
 will obtain an artificially old <a href="../../../../eu/focusnet/app/controller/DatabaseAdapter.html#uniqueInstanceIdentifier"><code>uniqueInstanceIdentifier</code></a> until the application is
 fully ready, and hence won't interfer with the behavior of this function that makes us
 use the last valid data set in the database.</div>
</li>
</ul>
<a name="makeDataPersistent--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>makeDataPersistent</h4>
<pre>public&nbsp;void&nbsp;makeDataPersistent()</pre>
<div class="block">Make data persistent. This is done by replacing our artificially old
 <a href="../../../../eu/focusnet/app/controller/DatabaseAdapter.html#uniqueInstanceIdentifier"><code>uniqueInstanceIdentifier</code></a> by a very new one.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../eu/focusnet/app/controller/CronService.CronBinder.html" title="class in eu.focusnet.app.controller"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../eu/focusnet/app/controller/DatabaseAdapter.DatabaseHelper.html" title="class in eu.focusnet.app.controller"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?eu/focusnet/app/controller/DatabaseAdapter.html" target="_top">Frames</a></li>
<li><a href="DatabaseAdapter.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
